<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Spectra MS backend storing data in a SQL database — MsBackendSql • MsBackendSql</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Spectra MS backend storing data in a SQL database — MsBackendSql"><meta property="og:description" content="The MsBackendSql is an implementation for the MsBackend() class for
Spectra() objects which stores and retrieves MS data from a SQL database.
New databases can be created from raw MS data files using
createMsBackendSqlDatabase."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">MsBackendSql</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.99.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/MsBackendSql.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/RforMassSpectrometry/MsBackendSql/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1><code>Spectra</code> MS backend storing data in a SQL database</h1>
    <small class="dont-index">Source: <a href="https://github.com/RforMassSpectrometry/MsBackendSql/blob/HEAD/R/MsBackendSql-functions.R" class="external-link"><code>R/MsBackendSql-functions.R</code></a>, <a href="https://github.com/RforMassSpectrometry/MsBackendSql/blob/HEAD/R/MsBackendSql.R" class="external-link"><code>R/MsBackendSql.R</code></a></small>
    <div class="hidden name"><code>MsBackendSql.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The <code>MsBackendSql</code> is an implementation for the <code><a href="https://rdrr.io/pkg/Spectra/man/MsBackend.html" class="external-link">MsBackend()</a></code> class for
<code><a href="https://rdrr.io/pkg/Spectra/man/Spectra.html" class="external-link">Spectra()</a></code> objects which stores and retrieves MS data from a SQL database.
New databases can be created from raw MS data files using
<code>createMsBackendSqlDatabase</code>.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre><code>MsBackendSql()

createMsBackendSqlDatabase(
  dbcon,
  x = character(),
  backend = MsBackendMzR(),
  chunksize = 10L,
  blob = TRUE,
  partitionBy = c("none", "spectrum", "chunk"),
  partitionNumber = 10L
)

# S4 method for MsBackendSql
show(object)

# S4 method for MsBackendSql
backendInitialize(object, dbcon, ...)

# S4 method for MsBackendSql
dataStorage(object)

# S4 method for MsBackendSql
[(x, i, j, ..., drop = FALSE)

# S4 method for MsBackendSql
peaksData(object, columns = c("mz", "intensity"))

# S4 method for MsBackendSql
peaksVariables(object)

# S4 method for MsBackendSql
intensity(object) &lt;- value

# S4 method for MsBackendSql
mz(object) &lt;- value

# S4 method for MsBackendSql
$(x, name) &lt;- value

# S4 method for MsBackendSql
spectraData(object, columns = spectraVariables(object))

# S4 method for MsBackendSql
reset(object)

# S4 method for MsBackendSql
spectraNames(object)

# S4 method for MsBackendSql
spectraNames(object) &lt;- value

# S4 method for MsBackendSql
filterMsLevel(object, msLevel = uniqueMsLevels(object))

# S4 method for MsBackendSql
filterRt(object, rt = numeric(), msLevel. = integer())

# S4 method for MsBackendSql
filterDataOrigin(object, dataOrigin = character())

# S4 method for MsBackendSql
filterPrecursorMzRange(object, mz = numeric())

# S4 method for MsBackendSql
filterPrecursorMzValues(object, mz = numeric(), ppm = 20, tolerance = 0)

# S4 method for MsBackendSql
uniqueMsLevels(object, ...)

# S4 method for MsBackendSql
precScanNum(object)

# S4 method for MsBackendSql
centroided(object)

# S4 method for MsBackendSql
smoothed(object)

# S4 method for MsBackendSql
tic(object, initial = TRUE)</code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>dbcon</dt>
<dd><p>Connection to a database.</p></dd>


<dt>x</dt>
<dd><p>For <code>createMsBackendSqlDatabase</code>: <code>character</code> with the names of
the raw data files from which the data should be imported. For other
methods an <code>MsqlBackend</code> instance.</p></dd>


<dt>backend</dt>
<dd><p>For <code>createMsBackendSqlDatabase</code>: MS backend that can be
used to import MS data from the raw files specified with
parameter <code>x</code>.</p></dd>


<dt>chunksize</dt>
<dd><p>For <code>createMsBackendSqlDatabase</code>: <code>integer(1)</code> defining
the number of input that should be processed per iteration. With
<code>chunksize = 1</code> each file specified with <code>x</code> will be imported and its
data inserted to the database. With <code>chunksize = 5</code> data from 5 files
will be imported (in parallel) and inserted to the database. Thus,
higher values might result in faster database creation, but require
also more memory.</p></dd>


<dt>blob</dt>
<dd><p>For <code>createMsBackendSqlDatabase</code>: <code>logical(1)</code> whether
individual m/z and intensity values should be stored separately
(<code>blob = FALSE</code>) or if the m/z and intensity values for each spectrum
should be stored as a single <em>BLOB</em> SQL data type (<code>blob = TRUE</code>,
the default).</p></dd>


<dt>partitionBy</dt>
<dd><p>For <code>createMsBackendSqlDatabase</code>: <code>character(1)</code>
defining if and how the peak data table should be partitioned. <code>"none"</code>
(default): no partitioning, <code>"spectrum"</code>: peaks are assigned to the
partition based on the spectrum ID (number), i.e. spectra are evenly
(consecutively) assigned across partitions. For <code>partitionNumber = 3</code>,
the first spectrum is assigned to the first partition, the second to
the second, the third to the third and the fourth spectrum again to
the first partition. <code>"chunk"</code>: spectra processed as part of the same
<em>chunk</em> are placed into the same partition. All spectra from the next
processed chunk are assigned to the next partition. Note that this is
only available for MySQL/MariaDB databases, i.e., if <code>con</code> is a
<code>MariaDBConnection</code>.
See details for more information.</p></dd>


<dt>partitionNumber</dt>
<dd><p>For <code>createMsBackendSqlDatabase</code>: <code>integer(1)</code>
defining the number of partitions the database table will be
partitioned into (only supported for MySQL/MariaDB databases).</p></dd>


<dt>object</dt>
<dd><p>A <code>MsBackendSql</code> instance.</p></dd>


<dt>...</dt>
<dd><p>For <code>[</code>: ignored.</p></dd>


<dt>i</dt>
<dd><p>For <code>[</code>: <code>integer</code> or <code>logical</code> to subset the object.</p></dd>


<dt>j</dt>
<dd><p>For <code>[</code>: ignored.</p></dd>


<dt>drop</dt>
<dd><p>For <code>[</code>: <code>logical(1)</code>, ignored.</p></dd>


<dt>columns</dt>
<dd><p>For <code>spectraData</code>: <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code> optionally defining a
subset of spectra variables that should be returned. Defaults to
<code>columns = spectraVariables(object)</code> hence all variables are returned.
For <code>peaksData</code> accessor: optional <code>character</code> with requested columns
in the individual <code>matrix</code> of the returned <code>list</code>. Defaults to
<code>columns = c("mz", "intensity")</code> but all columns listed by
<code>peaksVariables</code> would be supported.</p></dd>


<dt>value</dt>
<dd><p>For all setter methods: replacement value.</p></dd>


<dt>name</dt>
<dd><p>For <code>&lt;-</code>: <code>character(1)</code> with the name of the spectra variable
to replace.</p></dd>


<dt>msLevel</dt>
<dd><p>For <code>filterMsLevel</code>: <code>integer</code> specifying the MS levels to
filter the data.</p></dd>


<dt>rt</dt>
<dd><p>For <code>filterRt</code>: <code>numeric(2)</code> with the lower and upper retention
time. Spectra with a retention time <code>&gt;= rt[1]</code> and <code>&lt;= rt[2]</code> are
returned.</p></dd>


<dt>msLevel.</dt>
<dd><p>For <code>filterRt: </code>integer<code>with the MS level(s) on which the retention time filter should be applied (all spectra from other MS levels are considered for the filter and are returned *as is*). If not specified, the retention time filter is applied to all MS levels in</code>object`.</p></dd>


<dt>dataOrigin</dt>
<dd><p>For <code>filterDataOrigin</code>: <code>character</code> with <em>data origin</em>
values to which the data should be subsetted.</p></dd>


<dt>mz</dt>
<dd><p>For <code>filterPrecursorMzRange</code>: <code>numeric(2)</code> with the desired lower
and upper limit of the precursor m/z range.
For <code>filterPrecursorMzValues</code>: <code>numeric</code> with the m/z value(s) to
filter the object.</p></dd>


<dt>ppm</dt>
<dd><p>For <code>filterPrecursorMzValues</code>: <code>numeric</code> with the m/z-relative
maximal acceptable difference for a m/z value to be considered
matching. Can be of length 1 or equal to <code>length(mz)</code>.</p></dd>


<dt>tolerance</dt>
<dd><p>For <code>filterPrecursorMzValues</code>: <code>numeric</code> with the absolute
difference for m/z values to be considered matching. Can be of length 1
or equal to <code>length(mz)</code>.</p></dd>


<dt>initial</dt>
<dd><p>For <code>tic</code>: <code>logical(1)</code> whether the original total ion count
should be returned (<code>initial = TRUE</code>, the default) or whether it
should be calculated on the spectras' intensities (<code>initial = FALSE</code>).</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>See documentation of respective function.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The <code>MsBackendSql</code> class is in principle a <em>read-only</em> backend but by
extending the <code><a href="https://rdrr.io/pkg/Spectra/man/MsBackendCached.html" class="external-link">MsBackendCached()</a></code> backend from the <code>Spectra</code> package it
allows changing and adding (<strong>temporarily</strong>) spectra variables <strong>without</strong>
changing the original data in the SQL database.</p>
    </div>
    <div id="creation-of-backend-objects">
    <h2>Creation of backend objects</h2>
    


<p>SQL databases can be created and filled with MS data from raw data files
using the <code>createMsBackendSqlDatabase</code> function. Existing SQL databases
(created previously with <code>createMsBackendSqlDatabase</code> can be loaded using
the conventional way to create/initialize <code>MsBackend</code> classes, i.e. using
<code>backendInitialize</code>.</p><ul><li><p><code>createMsBackendSqlDatabase</code>: create a database and fill it with MS data.
Parameter <code>dbcon</code> is expected to be a database connection, parameter <code>x</code>
a <code>character</code> vector with the file names from which to import the data.
Parameter <code>backend</code> is used for the actual data import and defaults to
<code>backend = MsBackendMzR()</code> hence allowing to import data from mzML, mzXML
or netCDF files. Parameter <code>chunksize</code> allows to define the number of
files (<code>x</code>) from which the data should be imported in one iteration. With
the default <code>chunksize = 10L</code> data is imported from 10 files in <code>x</code> at
the same time (if <code>backend</code> supports it even in parallel) and this data
is then inserted into the database. Larger chunk sizes will require more
memory and also larger disk space (as data import is performed through
temporary files) but might eventually be faster. Parameter <code>blob</code> allows
to define whether m/z and intensity values from a spectrum should be
stored as a <em>BLOB</em> SQL data type in the database (<code>blob = TRUE</code>, the
default) or if individual m/z and intensity values for each peak should
be stored separately (<code>blob = FALSE</code>). The latter case results in a much
larger database and slower performance of the <code>peaksData</code> function, but
would allow to define custom (manual) SQL queries on individual peak
values.
While data can be stored in any SQL database, at present it is suggested
to use MySQL/MariaDB databases. For <code>dbcon</code> being a connection to a
MySQL/MariaDB database, the tables will use the <em>ARIA</em> engine providing
faster data access and will use <em>table partitioning</em>: tables are
splitted into multiple partitions which can improve data insertion and
index generation. Partitioning can be defined with the parameters
<code>partitionBy</code> and <code>partitionNumber</code>. By default <code>partitionBy = "none"</code>
no partitioning is performed. For <code>blob = TRUE</code> partitioning is usually
not required. Only for <code>blob = FALSE </code> and very large datasets it is
suggested to enable table partitioning by selecting either
<code>partitionBy = "spectrum"</code> or <code>partitionBy = "chunk"</code>. The first option
assignes consecutive spectra to different partitions while the latter
puts spectra from files part of the same <em>chunk</em> into the same partition.
Both options have about the same performance but
<code>partitionBy = "spectrum"</code> requires less disk space.
Note that, while inserting the data takes a considerable amount of
time, also the subsequent creation of database indices can take very
long (even longer than data insertion for <code>blob = FALSE</code>).</p></li>
<li><p><code>backendInitialize</code>: get access and initialize a <code>MsBackendSql</code> object.
Parameter <code>object</code> is supposed to be a <code>MsBackendSql</code> instance, created
e.g. with <code>MsBackendSql()</code>. Parameter <code>dbcon</code> is expected to be a
connection to a SQL database previously created with the
<code>createMsBackendSqlDatabase</code> function.</p></li>
</ul></div>
    <div id="subsetting-and-filtering-data">
    <h2>Subsetting and filtering data</h2>
    


<p><code>MsBackendSql</code> objects can be subsetted using the <code>[</code> function. Internally,
this will simply subset the <code>integer</code> vector of the primary keys and
eventually cached data. The original data in the database <strong>is not</strong>
affected by any subsetting operation. Any subsetting operation can be
<em>undone</em> by resetting the object with the <code>reset</code> function. Subsetting
in arbitrary order as well as index replication is supported.</p>
<p>In addition, <code>MsBackendSql</code> supports all other filtering methods available
through <code><a href="https://rdrr.io/pkg/Spectra/man/MsBackendCached.html" class="external-link">MsBackendCached()</a></code>. Implementation of filter functions optimized
for <code>MsBackendSql</code> objects are:</p><ul><li><p><code>filterDataOrigin</code>: filter the object retaining spectra with <code>dataOrigin</code>
spectra variable values matching the provided ones with parameter
<code>dataOrigin</code>. The function returns the results in the order of the
values provided with parameter <code>dataOrigin</code>.</p></li>
<li><p><code>filterMsLevel</code>: filter the object based on the MS levels specified with
parameter <code>msLevel</code>. The function does the filtering using SQL queries.
If <code>"msLevel"</code> is a <em>local</em> variable stored within the object (and hence
in memory) the default implementation in <code>MsBackendCached</code> is used
instead.</p></li>
<li><p><code>filterPrecursorMzRange</code>: filters the data keeping only spectra with a
<code>precursorMz</code> within the m/z value range provided with parameter <code>mz</code>
(i.e. all spectra with a precursor m/z <code>&gt;= mz[1L]</code> and <code>&lt;= mz[2L]</code>).</p></li>
<li><p>filterPrecursorMzValues<code>: filters the data keeping only spectra with precursor m/z values matching the value(s) provided with parameter </code>mz<code>. Parameters </code>ppm<code>and</code>tolerance<code>allow to specify acceptable differences between compared values. Lengths of</code>ppm<code>and</code>tolerance<code>can be either</code>1<code>or equal to</code>length(mz)` to use different values for ppm and
tolerance for each provided m/z value.</p></li>
<li><p><code>filterRt</code>: filter the object keeping only spectra with retention times
within the specified retention time range (parameter <code>rt</code>). Optional
parameter <code>msLevel.</code> allows to restrict the retention time filter only
on the provided MS level(s) returning all spectra from other MS levels.</p></li>
</ul></div>
    <div id="accessing-and-modifying-data">
    <h2>Accessing and <em>modifying</em> data</h2>
    


<p>The functions listed here are specifically implemented for <code>MsBackendSql</code>.
In addition, <code>MsBackendSql</code> inherits and supports all data accessor,
filtering functions and data manipulation functions from
<code><a href="https://rdrr.io/pkg/Spectra/man/MsBackendCached.html" class="external-link">MsBackendCached()</a></code>.</p><ul><li><p><code>$</code>, <code>$&lt;-</code>: access or set (add) spectra variables in <code>object</code>. Spectra
variables added or modified using the <code>$&lt;-</code> are <em>cached</em> locally within
the object (data in the database is never changed). To restore an object
(i.e. drop all cached values) the <code>reset</code> function can be used.</p></li>
<li><p><code>dataStorage</code>: returns a <code>character</code> vector same length as there are
spectra in <code>object</code> with the name of the database containing the data.</p></li>
<li><p><code>intensity&lt;-</code>: not supported.</p></li>
<li><p><code>mz&lt;-</code>: not supported.</p></li>
<li><p><code>peaksData</code>: returns a <code>list</code> with the spectras' peak data. The length of
the list is equal to the number of spectra in <code>object</code>. Each element of
the list is a <code>matrix</code> with columns according to parameter <code>columns</code>. For
an empty spectrum, a <code>matrix</code> with 0 rows is returned. Use
<code>peaksVariables(object)</code> to list supported values for parameter
<code>columns</code>.</p></li>
<li><p><code>peaksVariables</code>: returns a <code>character</code> with the available peak
variables, i.e. columns that could be queried with <code>peaksData</code>.</p></li>
<li><p><code>reset</code>: <em>restores</em> an <code>MsBackendSql</code> by re-initializing it with the
data from the database. Any subsetting or cached spectra variables will
be lost.</p></li>
<li><p><code>spectraData</code>: gets or general spectrum metadata.  <code>spectraData</code> returns
a <code>DataFrame</code> with the same number of rows as there are spectra in
<code>object</code>. Parameter <code>columns</code> allows to select specific spectra
variables.</p></li>
<li><p><code>spectraNames</code>, <code>spectraNames&lt;-</code>: returns a <code>character</code> of length equal
to the number of spectra in <code>object</code> with the primary keys of the spectra
from the database (converted to <code>character</code>). Replacing spectra names
with <code>spectraNames&lt;-</code> is not supported.</p></li>
<li><p><code>uniqueMsLevels</code>: returns the unique MS levels of all spectra in
<code>object</code>.</p></li>
<li><p><code>tic</code>: returns the originally reported total ion count (for
<code>initial = TRUE</code>) or calculates the total ion count from the intensities
of each spectrum (for <code>initial = FALSE</code>).</p></li>
</ul></div>
    <div id="implementation-notes">
    <h2>Implementation notes</h2>
    


<p>Internally, the <code>MsBackendSql</code> class contains only the primary keys for all
spectra stored in the SQL database. Keeping only these <code>integer</code> in memory
guarantees a minimal memory footpring of the object. Still, depending of
the number of spectra in the database, this <code>integer</code> vector might become
very large. Any data access will involve SQL calls to retrieve the data
from the database. By extending the <code><a href="https://rdrr.io/pkg/Spectra/man/MsBackendCached.html" class="external-link">MsBackendCached()</a></code> object from the
<code>Spectra</code> package, the <code>MsBackendSql</code> supports to (temporarily, i.e. for
the duration of the R session) add or modify spectra variables. These are
however stored in a <code>data.frame</code> within the object thus increasing the
memory demand of the object.</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Johannes Rainer</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">####</span></span></span>
<span class="r-in"><span><span class="co">## Create a new MsBackendSql database</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Define a file from which to import the data</span></span></span>
<span class="r-in"><span><span class="va">data_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"microtofq"</span>, <span class="st">"MM8.mzML"</span>, package <span class="op">=</span> <span class="st">"msdata"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Create a database/connection to a database</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rsqlite.r-dbi.org" class="external-link">RSQLite</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">db_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dbc</span> <span class="op">&lt;-</span> <span class="fu">dbConnect</span><span class="op">(</span><span class="fu"><a href="https://rsqlite.r-dbi.org/reference/SQLite.html" class="external-link">SQLite</a></span><span class="op">(</span><span class="op">)</span>, <span class="va">db_file</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Import the data from the file into the database</span></span></span>
<span class="r-in"><span><span class="fu">createMsBackendSqlDatabase</span><span class="op">(</span><span class="va">dbc</span>, <span class="va">data_file</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Importing data ... </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> [==========================================================] 1/1 (100%) in  1s</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Creating indices (this can take, depending on the database's size, very long) </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  Done</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="fu">dbDisconnect</span><span class="op">(</span><span class="va">dbc</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Initialize a MsBackendSql</span></span></span>
<span class="r-in"><span><span class="va">dbc</span> <span class="op">&lt;-</span> <span class="fu">dbConnect</span><span class="op">(</span><span class="fu"><a href="https://rsqlite.r-dbi.org/reference/SQLite.html" class="external-link">SQLite</a></span><span class="op">(</span><span class="op">)</span>, <span class="va">db_file</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">be</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/Spectra/man/hidden_aliases.html" class="external-link">backendInitialize</a></span><span class="op">(</span><span class="fu">MsBackendSql</span><span class="op">(</span><span class="op">)</span>, <span class="va">dbc</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">be</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> MsBackendSql with 198 spectra</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       msLevel precursorMz  polarity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;integer&gt;   &lt;numeric&gt; &lt;integer&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1           1          NA         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2           1          NA         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3           1          NA         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4           1          NA         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5           1          NA         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...       ...         ...       ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 194         1          NA         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 195         1          NA         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 196         1          NA         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 197         1          NA         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 198         1          NA         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ... 34 more variables/columns.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Use  'spectraVariables' to list all of them.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Database: /tmp/Rtmpzm1Zl9/file1ea816565df6</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Original data source</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">be</span><span class="op">$</span><span class="va">dataOrigin</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "/__w/_temp/Library/msdata/microtofq/MM8.mzML"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2] "/__w/_temp/Library/msdata/microtofq/MM8.mzML"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3] "/__w/_temp/Library/msdata/microtofq/MM8.mzML"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4] "/__w/_temp/Library/msdata/microtofq/MM8.mzML"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5] "/__w/_temp/Library/msdata/microtofq/MM8.mzML"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [6] "/__w/_temp/Library/msdata/microtofq/MM8.mzML"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Data storage</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/ProtGenerics/man/protgenerics.html" class="external-link">dataStorage</a></span><span class="op">(</span><span class="va">be</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "/tmp/Rtmpzm1Zl9/file1ea816565df6" "/tmp/Rtmpzm1Zl9/file1ea816565df6"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3] "/tmp/Rtmpzm1Zl9/file1ea816565df6" "/tmp/Rtmpzm1Zl9/file1ea816565df6"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5] "/tmp/Rtmpzm1Zl9/file1ea816565df6" "/tmp/Rtmpzm1Zl9/file1ea816565df6"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Access all spectra data</span></span></span>
<span class="r-in"><span><span class="va">spd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ProtGenerics/man/protgenerics.html" class="external-link">spectraData</a></span><span class="op">(</span><span class="va">be</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">spd</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> DataFrame with 198 rows and 37 columns</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       msLevel     rtime acquisitionNum scanIndex                             mz</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;integer&gt; &lt;numeric&gt;      &lt;integer&gt; &lt;integer&gt;                  &lt;NumericList&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1           1     0.486              1         1    104.554,106.996,107.966,...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2           1     0.822              2         2    107.960,109.964,112.027,...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3           1     1.159              3         3    107.963,112.021,113.035,...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4           1     1.495              4         4    105.971,109.984,112.028,...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5           1     1.832              5         5    104.474,107.000,109.968,...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...       ...       ...            ...       ...                            ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 194         1   65.4360            194       194    106.992,111.459,112.022,...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 195         1   65.7720            195       195  99.0797,109.0031,112.0232,...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 196         1   66.1092            196       196    102.927,108.970,112.028,...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 197         1   66.4458            197       197    111.058,112.026,113.029,...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 198         1   66.7818            198       198    111.044,112.024,112.518,...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           intensity            dataStorage             dataOrigin centroided</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       &lt;NumericList&gt;            &lt;character&gt;            &lt;character&gt;  &lt;integer&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      23,35,50,... /__w/_temp/Library/m.. /__w/_temp/Library/m..          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    35, 24,140,... /__w/_temp/Library/m.. /__w/_temp/Library/m..          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    28,179,350,... /__w/_temp/Library/m.. /__w/_temp/Library/m..          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    25, 28,131,... /__w/_temp/Library/m.. /__w/_temp/Library/m..          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      26,30,25,... /__w/_temp/Library/m.. /__w/_temp/Library/m..          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...             ...                    ...                    ...        ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 194    34,24,86,... /__w/_temp/Library/m.. /__w/_temp/Library/m..          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 195  24, 22,198,... /__w/_temp/Library/m.. /__w/_temp/Library/m..          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 196    29,22,98,... /__w/_temp/Library/m.. /__w/_temp/Library/m..          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 197  31,124,189,... /__w/_temp/Library/m.. /__w/_temp/Library/m..          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 198    67,84,22,... /__w/_temp/Library/m.. /__w/_temp/Library/m..          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      smoothed  polarity precScanNum precursorMz precursorIntensity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;integer&gt; &lt;integer&gt;   &lt;integer&gt;   &lt;numeric&gt;          &lt;numeric&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1          NA         1          NA          NA                 NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          NA         1          NA          NA                 NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3          NA         1          NA          NA                 NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4          NA         1          NA          NA                 NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5          NA         1          NA          NA                 NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...       ...       ...         ...         ...                ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 194        NA         1          NA          NA                 NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 195        NA         1          NA          NA                 NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 196        NA         1          NA          NA                 NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 197        NA         1          NA          NA                 NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 198        NA         1          NA          NA                 NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     precursorCharge collisionEnergy isolationWindowLowerMz</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           &lt;integer&gt;       &lt;numeric&gt;              &lt;numeric&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                NA              NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                NA              NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                NA              NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                NA              NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                NA              NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...             ...             ...                    ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 194              NA              NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 195              NA              NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 196              NA              NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 197              NA              NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 198              NA              NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     isolationWindowTargetMz isolationWindowUpperMz peaksCount totIonCurrent</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   &lt;numeric&gt;              &lt;numeric&gt;  &lt;integer&gt;     &lt;numeric&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                        NA                     NA       1743         97322</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                        NA                     NA       1708         98590</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                        NA                     NA       1708         96425</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                        NA                     NA       1747         97144</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                        NA                     NA       1730         94631</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...                     ...                    ...        ...           ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 194                      NA                     NA       2267        142472</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 195                      NA                     NA       2488        167102</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 196                      NA                     NA       2324        137565</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 197                      NA                     NA       2105        113086</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 198                      NA                     NA       1996         97257</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     basePeakMZ basePeakIntensity ionisationEnergy     lowMZ    highMZ</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      &lt;numeric&gt;         &lt;numeric&gt;        &lt;numeric&gt; &lt;numeric&gt; &lt;numeric&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      144.050              7250                0   104.554  1004.470</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      144.050              7064                0   107.960  1002.799</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      144.050              7124                0   107.963   993.959</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      144.051              7067                0   105.971   986.756</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      144.051              6891                0   104.474  1003.469</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...        ...               ...              ...       ...       ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 194    144.051              4615                0  106.9921  1003.828</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 195    144.051              3812                0   99.0797  1003.270</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 196    144.050              3526                0  102.9272  1000.594</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 197    144.050              3902                0  111.0582   984.228</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 198    144.051              3587                0  111.0437  1000.851</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     mergedScan mergedResultScanNum mergedResultStartScanNum</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      &lt;integer&gt;           &lt;integer&gt;                &lt;integer&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1           NA                  NA                       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2           NA                  NA                       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3           NA                  NA                       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4           NA                  NA                       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5           NA                  NA                       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...        ...                 ...                      ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 194         NA                  NA                       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 195         NA                  NA                       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 196         NA                  NA                       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 197         NA                  NA                       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 198         NA                  NA                       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     mergedResultEndScanNum injectionTime filterString  spectrumId</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  &lt;integer&gt;     &lt;numeric&gt;  &lt;character&gt; &lt;character&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                       NA             0           NA      scan=1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                       NA             0           NA      scan=2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                       NA             0           NA      scan=3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                       NA             0           NA      scan=4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                       NA             0           NA      scan=5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...                    ...           ...          ...         ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 194                     NA             0           NA    scan=194</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 195                     NA             0           NA    scan=195</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 196                     NA             0           NA    scan=196</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 197                     NA             0           NA    scan=197</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 198                     NA             0           NA    scan=198</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     ionMobilityDriftTime scanWindowLowerLimit scanWindowUpperLimit spectrum_id_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                &lt;numeric&gt;            &lt;numeric&gt;            &lt;numeric&gt;    &lt;integer&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                     NA                   NA                   NA            1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                     NA                   NA                   NA            2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                     NA                   NA                   NA            3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                     NA                   NA                   NA            4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                     NA                   NA                   NA            5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...                  ...                  ...                  ...          ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 194                   NA                   NA                   NA          194</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 195                   NA                   NA                   NA          195</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 196                   NA                   NA                   NA          196</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 197                   NA                   NA                   NA          197</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 198                   NA                   NA                   NA          198</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Available variables</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/ProtGenerics/man/protgenerics.html" class="external-link">spectraVariables</a></span><span class="op">(</span><span class="va">be</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "msLevel"                  "rtime"                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3] "acquisitionNum"           "scanIndex"               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5] "mz"                       "intensity"               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] "dataStorage"              "dataOrigin"              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9] "centroided"               "smoothed"                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [11] "polarity"                 "precScanNum"             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [13] "precursorMz"              "precursorIntensity"      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [15] "precursorCharge"          "collisionEnergy"         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [17] "isolationWindowLowerMz"   "isolationWindowTargetMz" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [19] "isolationWindowUpperMz"   "peaksCount"              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [21] "totIonCurrent"            "basePeakMZ"              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [23] "basePeakIntensity"        "ionisationEnergy"        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [25] "lowMZ"                    "highMZ"                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [27] "mergedScan"               "mergedResultScanNum"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [29] "mergedResultStartScanNum" "mergedResultEndScanNum"  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [31] "injectionTime"            "filterString"            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [33] "spectrumId"               "ionMobilityDriftTime"    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [35] "scanWindowLowerLimit"     "scanWindowUpperLimit"    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [37] "spectrum_id_"            </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Access mz values</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/ProtGenerics/man/protgenerics.html" class="external-link">mz</a></span><span class="op">(</span><span class="va">be</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NumericList of length 198</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]] 104.553733825684 106.996170043945 ... 1002.67761230469 1004.47033691406</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]] 107.959617614746 109.964324951172 ... 991.343811035156 1002.79937744141</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[3]] 107.962753295898 112.021392822266 ... 964.238586425781 993.959167480469</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[4]] 105.970863342285 109.984230041504 ... 979.084838867188 986.755981445312</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[5]] 104.473876953125 106.999610900879 ... 1003.185546875 1003.46936035156</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[6]] 102.036674499512 107.963928222656 ... 993.781127929688 994.755920410156</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[7]] 104.272621154785 112.024925231934 ... 996.248046875 1001.64440917969</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[8]] 98.9297180175781 106.506416320801 ... 991.034484863281 997.045837402344</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[9]] 107.966445922852 109.385284423828 ... 995.031494140625 995.600463867188</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[10]] 108.965042114258 109.974197387695 ... 982.596313476562 989.777404785156</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;188 more elements&gt;</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Subset the object to spectra in arbitrary order</span></span></span>
<span class="r-in"><span><span class="va">be_sub</span> <span class="op">&lt;-</span> <span class="va">be</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">100</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">be_sub</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> MsBackendSql with 6 spectra</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     msLevel precursorMz  polarity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   &lt;integer&gt;   &lt;numeric&gt; &lt;integer&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         1          NA         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         1          NA         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         1          NA         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         1          NA         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         1          NA         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         1          NA         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ... 34 more variables/columns.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Use  'spectraVariables' to list all of them.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Database: /tmp/Rtmpzm1Zl9/file1ea816565df6</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## The internal spectrum IDs (primary keys from the database)</span></span></span>
<span class="r-in"><span><span class="va">be_sub</span><span class="op">$</span><span class="va">spectrum_id_</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]   5   1   1   2   4 100</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Add additional spectra variables</span></span></span>
<span class="r-in"><span><span class="va">be_sub</span><span class="op">$</span><span class="va">new_variable</span> <span class="op">&lt;-</span> <span class="st">"B"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## This variable is *cached* locally within the object (not inserted into</span></span></span>
<span class="r-in"><span><span class="co">## the database)</span></span></span>
<span class="r-in"><span><span class="va">be_sub</span><span class="op">$</span><span class="va">new_variable</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "B" "B" "B" "B" "B" "B"</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Johannes Rainer.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.9000.</p>
</div>

      </footer></div>

  


  

  </body></html>

